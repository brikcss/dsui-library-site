<div class="${`brik-supernav__scroller ${this.props.showMenus && 'brik-supernav--show-menus'}`}" onmouseenter="${() => {this.classList.remove('brik--menu-is-inactive')}}">
	<!-- Profile header. -->
	<div class="brik-supernav__header" style="${{backgroundImage: `url(${this.props.headerBackground})`}}">
		<div class="brik-supernav__toolbar">
			<button type="button" class="brik-supernav__close-button" onclick="${this.handleClose}" tabindex="${this.props.active ? 0 : -1}">
				<brik-icon name="close"></brik-icon>
			</button>
		</div>
		<slot name="header">
			<img class="brik-supernav__avatar" src="assets/images/avatar.jpg" alt="User photo." />
			<h2 class="brik-supernav__user-name">${this.props.user.name}</h2>
			<div class="brik-supernav__user-id">ID: ${this.props.user.id}</div>
		</slot>
	</div>

	<!-- Links and menus. -->
	<nav class="${`brik-supernav__nav ${this.props.active ? 'brik-supernav--active' : ''}`}">
		${this.props.links.map((link, i) => hyperhtml.wire(link, ':link')`<div class="${`brik-supernav__item ${link.active ? 'brik--menu-is-active' : ''}`}" style="${`height: ${link.children && link.active && !this.props.isMini ? `${(link.children.length + 1) * 6}rem;` : ''}`}">
			${link.children ? hyperhtml.wire(link, ':link-without-path')`<button type="button" class="${link.separator ? 'brik-supernav__link brik-supernav__link-separator' : 'brik-supernav__link'}" onclick="${() => {
				if ((this.props.showMenus && this.props.isPinned) || this.props.isMini) return;
				const lastActiveLink = this.props.links.find((link, n) => n !== i && link.active);
				if (lastActiveLink) lastActiveLink.active = false;
				link.active = !link.active;
				this.render();
			}}" onfocus="${() => {link.focused = true;}}" onblur="${() => {link.focused = false;}}" tabindex="${(this.props.state === 'default' && this.props.active) || (this.props.isPinned && !this.props.showMenus) ? 0 : -1}">
				<brik-icon class="brik-supernav__link-icon" name="${link.icon}" size="3rem"></brik-icon>
				<span class="brik-supernav__link-label">${link.label}</span>
				${link.children ? hyperhtml.wire(link, ':link-no-path-button')`<brik-icon class="brik-supernav__menu-icon" name="chevron-down"></brik-icon>` : ''}
			</button>` : hyperhtml.wire(link, ':link-with-path')`<a class="${link.separator ? 'brik-supernav__link brik-supernav__link-separator' : 'brik-supernav__link'}" href="${'#!' + link.path}" tabindex="${this.props.active ? 0 : -1}">
				<brik-icon class="brik-supernav__link-icon" name="${link.icon}" size="3rem"></brik-icon>
				<span class="brik-supernav__link-label">${link.label}</span>
				${link.children ? hyperhtml.wire(link, ':link-path-button')`<brik-icon class="brik-supernav__menu-icon" name="chevron-down"></brik-icon>` : ''}
			</a>`}
			${link.children ? this.test = hyperhtml.wire(link, ':menu')`<div class="brik-supernav__menu">
				<div class="brik-supernav__menu-title">${link.label}</div>
				${link.children.map((sublink, i) => hyperhtml.wire(sublink)`<a class="brik-supernav__menu-link" href="${'#!' + [link.path, sublink.path].join('')}" onfocus="${() => {link.focused = true; if (!this.props.isMini) {return;} link.active = true; this.render();}}" onclick="${(event) => {
					if (this.props.isMini) {
						this.classList.add('brik--menu-is-inactive');
						link.focused = false;
						// this.blur();
						event.target.blur();
						this.$.page.click();
						// event.target.mousemove();
						// setTimeout(() => {
						// 	this.classList.remove('brik--menu-is-inactive');
						// }, 400);
					}
				}}" onblur="${() => {link.focused = false; if (!this.props.isMini) {return;} link.active = false; this.render();}}" tabindex="${this.props.active && (this.props.isMini || link.active) ? 0 : -1}"> ${sublink.label} </a>`)}
			</div>` : ''}
		</div>`)}
	</nav>
</div>

<a class="brik-supernav__logo-link" href="${this.props.homePath}" tabindex="-1">
	<slot name="logo"><img src="assets/images/logo__directscale.png" /></slot>
</a>

<style>${this.props.css}</style>
